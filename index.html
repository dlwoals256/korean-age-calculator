<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>만 나이 계산기</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- 기본 스타일 초기화 --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5; /* 부드러운 배경색 */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- 전체 래퍼 --- */
        #wrap {
            width: 100%;
            max-width: 600px; /* 최대 너비 설정 */
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 40px;
            transition: all 0.3s ease;
        }

        /* --- 헤더 --- */
        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 28px;
            font-weight: 700;
            color: #1c1e21;
        }

        /* --- 계산 폼 --- */
        .calForm form {
            display: flex;
            gap: 10px; /* 입력창과 버튼 사이 간격 */
        }

        #inpBirthDate {
            flex-grow: 1; /* 남은 공간을 모두 차지 */
            border: 1px solid #dddfe2;
            height: 50px;
            border-radius: 8px;
            padding: 0 20px;
            font-size: 18px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        #inpBirthDate::placeholder {
            color: #90949c;
        }

        #inpBirthDate:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        #submitBtn {
            height: 50px;
            padding: 0 25px;
            border: none;
            border-radius: 8px;
            background-color: #007bff;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #submitBtn:hover {
            background-color: #0056b3;
        }

        /* --- 결과 섹션 --- */
        .result-section {
            margin-top: 30px;
            padding: 25px;
            background-color: #f7f8fa;
            border-radius: 12px;
            text-align: center;
            opacity: 0; /* 기본적으로 숨김 */
            transform: translateY(10px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .result-section.visible {
            opacity: 1; /* 보이게 처리 */
            transform: translateY(0);
        }

        .result-section p {
            font-size: 18px;
            color: #4b4f56;
            line-height: 1.6;
        }

        .result-section .calAge {
            font-size: 2.5em; /* 상대 단위 사용 */
            font-weight: 700;
            color: #007bff;
        }
        
        .result-section .calYearAge {
            font-weight: 700;
            color: #28a745
        }

        /* --- 추가 정보 섹션 --- */
        .info-section {
            margin-top: 30px;
            font-size: 15px;
            color: #606770;
            line-height: 1.7;
            border-top: 1px solid #e0e0e0;
            padding-top: 25px;
        }
        
        .info-section h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #1c1e21;
        }
        
        .info-section .highlight {
            font-weight: 700;
            color: #dc3545;
        }

        .thanks {
            text-align: center;
            margin-top: 30px;
            font-size: 16px;
            color: #606770;
        }

        /* --- 숨김 클래스 --- */
        .hidden {
            display: none !important;
        }

        /* --- 모바일 반응형 --- */
        @media screen and (max-width: 480px) {
            body {
                padding: 10px;
            }
            #wrap {
                padding: 20px;
            }
            .title {
                font-size: 24px;
            }
            .calForm form {
                flex-direction: column; /* 세로 정렬 */
            }
        }
    </style>
</head>
<body>
    <div id="wrap">
        <header>
            <h2 class="title">만 나이 계산기</h2>
        </header>
        <main>
            <div class="calForm">
                <form id="ageForm">
                    <input type="text" id="inpBirthDate" name="birthDate" placeholder="생년월일 8자리 (YYYYMMDD)"
                           pattern="(19|20)\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])"
                           title="YYYYMMDD 형식에 맞게 8자리로 입력해주세요." required />
                    <button type="submit" id="submitBtn">계산하기</button>
                </form>
            </div>
            
            <div id="resultContainer" class="hidden">
                <section class="result-section">
                    <p>당신의 만 나이는</p>
                    <p><span class="calAge"></span>세 입니다!</p>
                    <p>(연 나이: <span class="calYearAge"></span>세)</p>
                </section>

                <section class="info-section">
                    <h3>'세는 나이'와 '만 나이'</h3>
                    <p>
                        과거 우리가 흔히 사용하던 '세는 나이'(<span class="koreanTraditionalAge highlight"></span>살)는 태어나자마자 한 살이 되고, 해가 바뀔 때마다 한 살씩 더하는 방식이었습니다. 
                        하지만 이제 법적으로 <span style="font-weight: bold;">'만 나이'</span>가 통일되어, 생일을 기준으로 나이를 계산합니다.
                        덕분에 당신은 <span class="ageOffset highlight"></span>살 더 젊어졌어요! (기분 좋게 말이죠!)
                    </p>
                </section>

                <div class="thanks">
                    <p>이용해주셔서 감사합니다!</p>
                </div>
            </div>
        </main>
    </div>
    <script>
        const ageForm = document.getElementById("ageForm");
        const resultContainer = document.getElementById("resultContainer");
        
        // 결과가 표시될 모든 span 요소들
        const calAgeSpans = document.querySelectorAll(".calAge");
        const calYearAgeSpans = document.querySelectorAll(".calYearAge");
        const koreanTraditionalAgeSpan = document.querySelector(".koreanTraditionalAge");
        const ageOffsetSpan = document.querySelector(".ageOffset");
        
        // 결과 섹션 (애니메이션용)
        const resultSection = document.querySelector('.result-section');

        const handleSubmit = e => {
            e.preventDefault(); // 폼 제출 시 새로고침 방지

            const birthDateStr = document.getElementById("inpBirthDate").value;
            if (!birthDateStr || !/^(19|20)\d{6}$/.test(birthDateStr)) {
                return; // 유효하지 않은 입력이면 중단
            }

            const birthYear = parseInt(birthDateStr.substring(0, 4));
            const birthMonth = parseInt(birthDateStr.substring(4, 6));
            const birthDay = parseInt(birthDateStr.substring(6, 8));

            const today = new Date();
            const currentYear = today.getFullYear();
            const currentMonth = today.getMonth() + 1; // getMonth()는 0부터 시작
            const currentDay = today.getDate();

            // 1. 만 나이 계산
            let age = currentYear - birthYear;
            // 생일이 지나지 않았으면 1을 뺌
            if (birthMonth > currentMonth || (birthMonth === currentMonth && birthDay > currentDay)) {
                age--;
            }

            // 2. 연 나이 계산 (현재 연도 - 출생 연도)
            const yearAge = currentYear - birthYear;
            
            // 3. 세는 나이 (한국식 나이)
            const koreanTraditionalAge = currentYear - birthYear + 1;

            // 4. 세는 나이와 만 나이의 차이
            const ageOffset = koreanTraditionalAge - age;

            // 계산된 나이를 화면에 표시
            calAgeSpans.forEach(span => span.textContent = age);
            calYearAgeSpans.forEach(span => span.textContent = yearAge);
            koreanTraditionalAgeSpan.textContent = koreanTraditionalAge;
            ageOffsetSpan.textContent = ageOffset;

            // 결과 컨테이너를 부드럽게 보이도록 처리
            resultContainer.classList.remove("hidden");
            // 강제로 리플로우를 발생시켜 애니메이션이 다시 동작하도록 함
            void resultSection.offsetWidth; 
            resultSection.classList.add('visible');
        };

        ageForm.addEventListener("submit", handleSubmit);
    </script>
</body>
</html>
